(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[559],{1928:(e,t,s)=>{Promise.resolve().then(s.bind(s,7948))},7948:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var r=s(5155),l=s(2115),a=s(6620),i=s(9895),n=s(8783),c=s(8033),m=s(8831),x=s(6046),d=s(2818);function h(){let e=(0,x.useSearchParams)(),[t,s]=(0,l.useState)([]),[h,o]=(0,l.useState)(""),[u,j]=(0,l.useState)(""),[p,f]=(0,l.useState)(!0),[g,N]=(0,l.useState)(null);(0,l.useEffect)(()=>{let t=e.get("id");if(!t){N("Article ID is missing"),f(!1);return}fetch("".concat(d.env.NEXT_PUBLIC_API_URL,"/api/articles/").concat(t)).then(e=>e.json()).then(e=>{o(e.title),j(e.summary),s(e.content),f(!1)}).catch(e=>{N("Failed to load article"),f(!1)})},[e]);let b=e=>{let t=/(https?:\/\/[^\s]+)/g,s=e.split(t);return 0===(e.match(t)||[]).length?(0,r.jsx)("p",{className:"my-4 text-lg",children:e}):(0,r.jsx)("p",{className:"my-4 text-lg",children:s.map((e,t)=>t%2==1?(0,r.jsx)(a.h,{href:e,target:"_blank",rel:"noopener noreferrer",color:"primary",isExternal:!0,children:e},t):e)})},y=(e,t)=>{switch(e.type){case"heading":let s=e.level||1;if(1===s)return(0,r.jsx)("h1",{className:"text-3xl font-bold mt-8 mb-4",children:e.text},t);if(2===s)return(0,r.jsx)("h2",{className:"text-2xl font-bold mt-6 mb-3",children:e.text},t);return(0,r.jsx)("h3",{className:"text-xl font-bold mt-5 mb-3",children:e.text},t);case"paragraph":return(0,r.jsx)("div",{children:b(e.text)},t);case"list":if(e.ordered)return(0,r.jsx)("ol",{className:"list-decimal ml-6 my-4",children:e.items.map((e,t)=>(0,r.jsx)("li",{className:"mb-1",children:e},t))},t);return(0,r.jsx)("ul",{className:"list-disc ml-6 my-4",children:e.items.map((e,t)=>(0,r.jsx)("li",{className:"mb-1",children:e},t))},t);case"photo":if(!e.url||""===e.url)return(0,r.jsxs)("figure",{className:"my-6",children:[(0,r.jsx)("div",{className:"w-full h-48 bg-gray-200 rounded-lg flex items-center justify-center",children:(0,r.jsx)("span",{className:"text-gray-500",children:"Изображение недоступно"})}),e.caption&&(0,r.jsx)("figcaption",{className:"text-center text-sm mt-2 text-gray-500",children:e.caption})]},t);return(0,r.jsxs)("figure",{className:"my-6",children:[(0,r.jsx)(i.W,{alt:e.alt||"Article image",className:"w-full rounded-lg",src:e.url}),e.caption&&(0,r.jsx)("figcaption",{className:"text-center text-sm mt-2 text-gray-500",children:e.caption})]},t);case"link":return(0,r.jsx)("div",{className:"my-4",children:(0,r.jsx)(a.h,{href:e.url,target:"_blank",rel:"noopener noreferrer",color:"primary",isExternal:!0,children:e.text||e.url})},t);default:return null}};return p?(0,r.jsx)("div",{className:"grid grid-rows-[20px_1fr_20px] items-center justify-items-center min-h-screen p-8",children:(0,r.jsx)("div",{className:"row-start-2 flex justify-center",children:(0,r.jsx)(n.o,{size:"lg"})})}):g?(0,r.jsx)("div",{className:"grid grid-rows-[20px_1fr_20px] items-center justify-items-center min-h-screen p-8",children:(0,r.jsxs)("div",{className:"row-start-2 text-center",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Ошибка"}),(0,r.jsx)("p",{children:g})]})}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("h1",{className:"text-4xl font-bold mb-8 text-center",children:h}),(0,r.jsxs)("main",{className:"bg-transparent w-11/12 max-w-4xl mx-auto row-start-2",children:[(0,r.jsx)(c.D,{variant:"bordered",className:"span:text-[5vh]",hideIndicator:!0,isCompact:!0,children:(0,r.jsx)(m.R,{title:"Нет времени читать?",subtitle:"Сводка",isCompact:!0,children:(0,r.jsx)("p",{className:"text-lg",children:u})})}),(0,r.jsx)("article",{children:t.map((e,t)=>y(e,t))})]})]})}function o(){return(0,r.jsx)(l.Suspense,{fallback:(0,r.jsx)("div",{className:"grid grid-rows-[20px_1fr_20px] items-center justify-items-center min-h-screen p-8",children:(0,r.jsx)("div",{className:"row-start-2 flex justify-center",children:(0,r.jsx)(n.o,{size:"lg"})})}),children:(0,r.jsx)(h,{})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[534,930,324,441,517,358],()=>t(1928)),_N_E=e.O()}]);